import"./chunk-MS4AQ6UA.js";import{A as N,C as z,D,da as j,ea as A,v as F,y as B}from"./chunk-RJSNM4KO.js";import{b as V,f as I,i as W,m as L}from"./chunk-I65OLL6P.js";import"./chunk-XAA4ZOKT.js";import{$a as h,Ib as a,Jb as M,Kb as v,La as l,Mb as _,Nb as g,Ob as u,Qa as S,Xa as y,a as T,gb as x,ha as d,ia as m,ib as E,pb as o,qb as n,rb as b,rc as P,sc as k,vb as C,vc as O,xb as f,yb as s}from"./chunk-DQFRA6VU.js";function R(p,c){if(p&1){let t=C();o(0,"button",9),f("click",function(){d(t);let e=s();return m(e.abrirModalCriar())}),a(1," Novo T\xE9cnico "),n()}}function U(p,c){if(p&1){let t=C();o(0,"div",12)(1,"button",13),f("click",function(e){d(t);let r=s().$implicit;return s().abrirModalEditar(r),m(e.stopPropagation())}),b(2,"img",14),n(),o(3,"button",15),f("click",function(e){d(t);let r=s().$implicit,w=s();return m(w.confirmarDelecao(r.id,e))}),b(4,"img",16),n()()}}function Y(p,c){if(p&1){let t=C();o(0,"div",10),f("click",function(){let e=d(t).$implicit,r=s();return m(r.abrirModalEditar(e))}),o(1,"h3"),a(2),n(),o(3,"p")(4,"strong"),a(5,"ID:"),n(),a(6),n(),o(7,"p")(8,"strong"),a(9,"CPF:"),n(),a(10),n(),o(11,"p")(12,"strong"),a(13,"RG:"),n(),a(14),n(),o(15,"p")(16,"strong"),a(17,"Telefone:"),n(),a(18),n(),o(19,"p")(20,"strong"),a(21,"Servi\xE7os Prestados:"),n(),a(22),n(),h(23,U,5,0,"div",11),n()}if(p&2){let t=c.$implicit,i=s();E("clickable",i.permissaoLogada==="admin"||i.permissaoLogada==="dev"),l(2),M(t.nome),l(4),v(" ",t.id,""),l(4),v(" ",t.cpf,""),l(4),v(" ",t.rg,""),l(4),v(" ",t.telefone,""),l(4),v(" ",t.servicos_prestados,""),l(),x("ngIf",i.permissaoLogada==="admin"||i.permissaoLogada==="dev")}}function q(p,c){if(p&1){let t=C();o(0,"div",17)(1,"div",18)(2,"h2"),a(3,"Editar T\xE9cnico"),n(),o(4,"mat-form-field",19)(5,"mat-label"),a(6,"Nome"),n(),o(7,"input",20),u("ngModelChange",function(e){d(t);let r=s();return g(r.tecnicoSelecionado.nome,e)||(r.tecnicoSelecionado.nome=e),m(e)}),n()(),o(8,"mat-form-field",19)(9,"mat-label"),a(10,"CPF"),n(),o(11,"input",20),u("ngModelChange",function(e){d(t);let r=s();return g(r.tecnicoSelecionado.cpf,e)||(r.tecnicoSelecionado.cpf=e),m(e)}),n()(),o(12,"mat-form-field",19)(13,"mat-label"),a(14,"RG"),n(),o(15,"input",20),u("ngModelChange",function(e){d(t);let r=s();return g(r.tecnicoSelecionado.rg,e)||(r.tecnicoSelecionado.rg=e),m(e)}),n()(),o(16,"mat-form-field",19)(17,"mat-label"),a(18,"Telefone"),n(),o(19,"input",20),u("ngModelChange",function(e){d(t);let r=s();return g(r.tecnicoSelecionado.telefone,e)||(r.tecnicoSelecionado.telefone=e),m(e)}),n()(),o(20,"mat-form-field",19)(21,"mat-label"),a(22,"Servi\xE7os Prestados"),n(),o(23,"textarea",20),u("ngModelChange",function(e){d(t);let r=s();return g(r.tecnicoSelecionado.servicos_prestados,e)||(r.tecnicoSelecionado.servicos_prestados=e),m(e)}),n()(),o(24,"div",21)(25,"button",22),f("click",function(){d(t);let e=s();return m(e.salvarAlteracoes())}),a(26,"Salvar"),n(),o(27,"button",23),f("click",function(){d(t);let e=s();return m(e.fecharModalEditar())}),a(28,"Cancelar"),n()()()()}if(p&2){let t=s();l(7),_("ngModel",t.tecnicoSelecionado.nome),l(4),_("ngModel",t.tecnicoSelecionado.cpf),l(4),_("ngModel",t.tecnicoSelecionado.rg),l(4),_("ngModel",t.tecnicoSelecionado.telefone),l(4),_("ngModel",t.tecnicoSelecionado.servicos_prestados)}}function H(p,c){if(p&1){let t=C();o(0,"div",17)(1,"div",18)(2,"h2"),a(3,"Criar Novo T\xE9cnico"),n(),o(4,"mat-form-field",19)(5,"mat-label"),a(6,"Nome"),n(),o(7,"input",20),u("ngModelChange",function(e){d(t);let r=s();return g(r.novoTecnico.nome,e)||(r.novoTecnico.nome=e),m(e)}),n()(),o(8,"mat-form-field",19)(9,"mat-label"),a(10,"CPF"),n(),o(11,"input",20),u("ngModelChange",function(e){d(t);let r=s();return g(r.novoTecnico.cpf,e)||(r.novoTecnico.cpf=e),m(e)}),n()(),o(12,"mat-form-field",19)(13,"mat-label"),a(14,"RG"),n(),o(15,"input",20),u("ngModelChange",function(e){d(t);let r=s();return g(r.novoTecnico.rg,e)||(r.novoTecnico.rg=e),m(e)}),n()(),o(16,"mat-form-field",19)(17,"mat-label"),a(18,"Telefone"),n(),o(19,"input",20),u("ngModelChange",function(e){d(t);let r=s();return g(r.novoTecnico.telefone,e)||(r.novoTecnico.telefone=e),m(e)}),n()(),o(20,"mat-form-field",19)(21,"mat-label"),a(22,"Servi\xE7os Prestados"),n(),o(23,"textarea",20),u("ngModelChange",function(e){d(t);let r=s();return g(r.novoTecnico.servicos_prestados,e)||(r.novoTecnico.servicos_prestados=e),m(e)}),n()(),o(24,"div",21)(25,"button",22),f("click",function(){d(t);let e=s();return m(e.salvarNovoTecnico())}),a(26,"Criar"),n(),o(27,"button",23),f("click",function(){d(t);let e=s();return m(e.fecharModalCriar())}),a(28,"Cancelar"),n()()()()}if(p&2){let t=s();l(7),_("ngModel",t.novoTecnico.nome),l(4),_("ngModel",t.novoTecnico.cpf),l(4),_("ngModel",t.novoTecnico.rg),l(4),_("ngModel",t.novoTecnico.telefone),l(4),_("ngModel",t.novoTecnico.servicos_prestados)}}function J(p,c){if(p&1&&(o(0,"p",24),a(1),n()),p&2){let t=s();l(),M(t.erro)}}var G=class p{constructor(c){this.dataService=c}tecnicos=[];filteredTecnicos=[];erro="";searchTerm="";tecnicoSelecionado=null;mostrarModalEditar=!1;mostrarModalCriar=!1;novoTecnico={nome:"",telefone:"",email:""};permissaoLogada="";ngOnInit(){let c=localStorage.getItem("token"),t=localStorage.getItem("permissao");if(this.permissaoLogada=t||"",!c){this.erro="Token de autentica\xE7\xE3o n\xE3o encontrado. Fa\xE7a login novamente.";return}this.dataService.listarTecnicos(c).subscribe({next:i=>{this.tecnicos=i.tecnicos||[],this.filteredTecnicos=this.tecnicos},error:i=>{this.erro="Erro ao carregar t\xE9cnicos. Verifique a autentica\xE7\xE3o.",console.error(i)}})}filterAndSortTecnicos(){let c=this.tecnicos;this.searchTerm&&(c=c.filter(t=>t.nome.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.filteredTecnicos=c}abrirModalEditar(c){(this.permissaoLogada==="admin"||this.permissaoLogada==="dev")&&(this.tecnicoSelecionado=T({},c),this.mostrarModalEditar=!0)}fecharModalEditar(){this.mostrarModalEditar=!1}salvarAlteracoes(){let c=localStorage.getItem("token");!c||!this.tecnicoSelecionado||this.dataService.atualizarTecnico(this.tecnicoSelecionado.id,this.tecnicoSelecionado,c).subscribe({next:()=>{alert("T\xE9cnico atualizado com sucesso!"),this.mostrarModalEditar=!1,location.reload()},error:t=>{console.error(t),alert("Erro ao atualizar t\xE9cnico.")}})}confirmarDelecao(c,t){if(t.stopPropagation(),confirm("Tem certeza que deseja deletar este t\xE9cnico?")){let i=localStorage.getItem("token");if(!i){this.erro="Token de autentica\xE7\xE3o n\xE3o encontrado.";return}this.dataService.deletarTecnico(c,i).subscribe({next:()=>{alert("T\xE9cnico deletado com sucesso!"),this.tecnicos=this.tecnicos.filter(e=>e.id!==c),this.filteredTecnicos=this.filteredTecnicos.filter(e=>e.id!==c)},error:e=>{console.error(e),alert("Erro ao deletar t\xE9cnico.")}})}}abrirModalCriar(){this.novoTecnico={nome:"",telefone:"",email:""},this.mostrarModalCriar=!0}fecharModalCriar(){this.mostrarModalCriar=!1}salvarNovoTecnico(){let c=localStorage.getItem("token");c&&this.dataService.criarTecnico(this.novoTecnico,c).subscribe({next:()=>{alert("T\xE9cnico criado com sucesso!"),this.mostrarModalCriar=!1,location.reload()},error:t=>{console.error(t),alert("Erro ao criar t\xE9cnico.")}})}static \u0275fac=function(t){return new(t||p)(S(A))};static \u0275cmp=y({type:p,selectors:[["app-tecnicos"]],decls:14,vars:6,consts:[[1,"container"],[1,"filters"],["appearance","fill",1,"search-field"],["matInput","",3,"ngModelChange","input","ngModel"],["class","new-tech-button",3,"click",4,"ngIf"],[1,"technicians-grid"],["class","technician-card",3,"clickable","click",4,"ngFor","ngForOf"],["class","modal-overlay",4,"ngIf"],["class","error",4,"ngIf"],[1,"new-tech-button",3,"click"],[1,"technician-card",3,"click"],["class","card-actions",4,"ngIf"],[1,"card-actions"],[1,"update-button",3,"click"],["src","icons/edit.png","alt","Editar"],[1,"delete-button",3,"click"],["src","icons/trash.png","alt","Deletar"],[1,"modal-overlay"],[1,"modal"],["appearance","fill",1,"full-width"],["matInput","",3,"ngModelChange","ngModel"],[1,"modal-actions"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"],[1,"error"]],template:function(t,i){t&1&&(o(0,"section",0)(1,"h2"),a(2,"Lista de T\xE9cnicos"),n(),o(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),a(6,"Buscar por nome"),n(),o(7,"input",3),u("ngModelChange",function(r){return g(i.searchTerm,r)||(i.searchTerm=r),r}),f("input",function(){return i.filterAndSortTecnicos()}),n()(),h(8,R,2,0,"button",4),n(),o(9,"div",5),h(10,Y,24,9,"div",6),n(),h(11,q,29,5,"div",7)(12,H,29,5,"div",7)(13,J,2,1,"p",8),n()),t&2&&(l(7),_("ngModel",i.searchTerm),l(),x("ngIf",i.permissaoLogada==="admin"||i.permissaoLogada==="dev"),l(2),x("ngForOf",i.filteredTecnicos),l(),x("ngIf",i.mostrarModalEditar),l(),x("ngIf",i.mostrarModalCriar),l(),x("ngIf",i.erro))},dependencies:[O,P,k,L,V,I,W,N,B,F,D,z,j],styles:[".container[_ngcontent-%COMP%]{max-width:1000px;margin:2rem auto;padding:1rem;font-family:Segoe UI,sans-serif;background-color:var(--bg-color);color:var(--text-color);border-radius:12px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;font-size:2rem;color:#fff}.alert-box[_ngcontent-%COMP%]{background-color:var(--alert-red);color:var(--text-white);text-align:center;padding:1rem;border-radius:6px;margin-bottom:1.5rem}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem;justify-content:center;margin-bottom:2rem}.search-field[_ngcontent-%COMP%]{width:250px}mat-form-field[_ngcontent-%COMP%]{width:250px}.technicians-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around;gap:1rem}.technician-card[_ngcontent-%COMP%]{background-color:var(--card-dark);border:1px solid var(--card-border);color:var(--text-color);border-radius:12px;padding:1rem;box-shadow:0 4px 20px #0000004d;transition:transform .25s ease,box-shadow .25s ease;animation:_ngcontent-%COMP%_fadeInUp .5s ease both;width:280px;display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;text-align:left}.technician-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 25px #00000080}.technician-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1.2rem;margin-bottom:.7rem;color:var(--text-white);width:100%}.technician-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.3rem 0;font-size:.95rem;color:var(--text-grey);width:100%}.card-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;width:100%;margin-top:1rem}.update-button[_ngcontent-%COMP%]{background-color:var(--update-btn);color:var(--text-white);border:none;padding:.4rem;border-radius:8px;font-size:1.2rem;cursor:pointer;transition:background-color .3s}.update-button[_ngcontent-%COMP%]:hover{background-color:var(--update-btn-hover)}.update-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:contain}.delete-button[_ngcontent-%COMP%]{background-color:var(--alert-red);color:var(--text-white);border:none;padding:.4rem;border-radius:8px;font-size:1.2rem;cursor:pointer;transition:background-color .3s}.delete-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:contain}.delete-button[_ngcontent-%COMP%]:hover{background-color:var(--alert-hover)}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#2c2c2c;padding:2rem;border-radius:8px;width:400px;max-width:90%}.full-width[_ngcontent-%COMP%]{width:100%}.modal-actions[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;justify-content:space-between}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-weight:700;cursor:pointer;font-size:.95rem;transition:background-color .3s ease}.modal-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background-color:var(--success-color);color:var(--text-white)}.modal-actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:hover{background-color:var(--success-hover)}.modal-actions[_ngcontent-%COMP%]   button[color=warn][_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.modal-actions[_ngcontent-%COMP%]   button[color=warn][_ngcontent-%COMP%]:hover{background-color:var(--primary-color);color:var(--text-white)}.mat-mdc-select[_ngcontent-%COMP%], .mat-mdc-select-value[_ngcontent-%COMP%]{color:#eaeaea}.mat-mdc-option[_ngcontent-%COMP%]{background-color:#1e1e1e!important;color:#eaeaea!important}.mat-mdc-option[_ngcontent-%COMP%]:hover{background-color:#333!important}.new-tech-button[_ngcontent-%COMP%]{background-color:var(--primary-hover);color:#fff;border:none;margin-bottom:20px;padding:10px 15px;border-radius:5px;cursor:pointer;display:flex;align-items:center;gap:8px}.new-tech-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})};export{G as TecnicosComponent};
