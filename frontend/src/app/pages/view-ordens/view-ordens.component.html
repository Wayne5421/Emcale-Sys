<section class="container">
  <div class="header-with-search">
    <h2>ðŸ“‹ Ordens de ServiÃ§o</h2>

    <mat-form-field appearance="fill" class="search-field">
      <mat-label>Pesquisar</mat-label>
      <input matInput (input)="applyFilter($event)" placeholder="Filtrar ordens" />
    </mat-form-field>
  </div>

  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8 tabela-ordens">

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
      <td mat-cell *matCellDef="let ordem">{{ ordem.id }}</td>
    </ng-container>

    <ng-container matColumnDef="wo_projeto">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Projeto</th>
      <td mat-cell *matCellDef="let ordem">{{ ordem.wo_projeto }}</td>
    </ng-container>

    <ng-container matColumnDef="cidade">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Cidade</th>
      <td mat-cell *matCellDef="let ordem">{{ ordem.cidade }}</td>
    </ng-container>

    <ng-container matColumnDef="regional">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Regional</th>
      <td mat-cell *matCellDef="let ordem">{{ ordem.regional }}</td>
    </ng-container>

    <ng-container matColumnDef="escopo">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Escopo</th>
      <td mat-cell *matCellDef="let ordem">{{ ordem.escopo }}</td>
    </ng-container>

    <ng-container matColumnDef="premissas">
      <th mat-header-cell *matHeaderCellDef>Premissas</th>
      <td mat-cell *matCellDef="let ordem">{{ ordem.premissas }}</td>
    </ng-container>

    <ng-container matColumnDef="data_abertura">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Data Abertura</th>
      <td mat-cell *matCellDef="let ordem">
        {{ ordem.data_abertura | date: 'dd/MM/yyyy' }}
      </td>
    </ng-container>

    <ng-container matColumnDef="prazo_desktop">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Prazo Desktop</th>
      <td mat-cell *matCellDef="let ordem">
        {{ ordem.prazo_desktop ? (ordem.prazo_desktop | date: 'dd/MM/yyyy') : '-' }}
      </td>
    </ng-container>

    <ng-container matColumnDef="prazo_tecnico">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Prazo TÃ©cnico</th>
      <td mat-cell *matCellDef="let ordem">
        {{ ordem.prazo_tecnico ? (ordem.prazo_tecnico | date: 'dd/MM/yyyy') : '-' }}
      </td>
    </ng-container>

    <ng-container matColumnDef="descricao_status">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
      <td mat-cell *matCellDef="let ordem" [ngClass]="getStatusCellClass(ordem.descricao_status)">
        {{ ordem.descricao_status }}
      </td>
    </ng-container>

    <ng-container matColumnDef="nome_tecnico">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>TÃ©cnico</th>
      <td mat-cell *matCellDef="let ordem">{{ ordem.nome_tecnico }}</td>
    </ng-container>

    <ng-container matColumnDef="dias_restantes">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Faltam</th>
      <td mat-cell *matCellDef="let ordem">
        {{ ordem.dias_restantes }} dias
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="row-anim" [ngClass]="getRowClass(row)"></tr>
  </table>
</section>